// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`SharedInfraStack Snapshot 1`] = `
Object {
  "Outputs": Object {
    "BucketConfigBucket6D3E4CBA": Object {
      "Value": Object {
        "Ref": "BucketD7FEB781",
      },
    },
    "KmsKeyOutputB5767BE1": Object {
      "Value": Object {
        "Ref": "KmsKeyBFFB7B85",
      },
    },
    "VaultDynamoDBVaultTable80F08FA5": Object {
      "Value": Object {
        "Ref": "VaultDynamoDBTable7271446C",
      },
    },
  },
  "Resources": Object {
    "BucketD7FEB781": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "LifecycleConfiguration": Object {
          "Rules": Array [
            Object {
              "NoncurrentVersionExpirationInDays": 60,
              "Status": "Enabled",
            },
          ],
        },
        "NotificationConfiguration": Object {
          "EventBridgeConfiguration": Object {
            "EventBridgeEnabled": "true",
          },
        },
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "GitHubActionsOidcProviderGithubOidcProvider": Object {
      "Properties": Object {
        "ClientIdList": Array [
          "https://github.com/devops-at-home",
        ],
        "ThumbprintList": Array [
          "6938fd4d98bab03faadb97b34396831e3780aea1",
        ],
        "Url": "https://token.actions.githubusercontent.com",
      },
      "Type": "AWS::IAM::OIDCProvider",
    },
    "GitHubActionsRole4F1BBA26": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRoleWithWebIdentity",
              "Condition": Object {
                "StringLike": Object {
                  "token.actions.githubusercontent.com:sub": "repo:devops-at-home/*:ref:refs/heads/main*",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Federated": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:iam::",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":oidc-provider/token.actions.githubusercontent.com",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": "s3:PutObject",
                  "Condition": Object {
                    "StringEquals": Object {
                      "s3:prefix": Array [
                        "h6060-001.zip",
                      ],
                    },
                  },
                  "Effect": "Allow",
                  "Resource": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        Object {
                          "Fn::GetAtt": Array [
                            "BucketD7FEB781",
                            "Arn",
                          ],
                        },
                        "/*",
                      ],
                    ],
                  },
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "s3",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "KmsKeyBFFB7B85": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Retain",
    },
    "VaultDynamoDBTable7271446C": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AttributeDefinitions": Array [
          Object {
            "AttributeName": "Path",
            "AttributeType": "S",
          },
          Object {
            "AttributeName": "Key",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": Array [
          Object {
            "AttributeName": "Path",
            "KeyType": "HASH",
          },
          Object {
            "AttributeName": "Key",
            "KeyType": "RANGE",
          },
        ],
        "SSESpecification": Object {
          "SSEEnabled": true,
        },
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Retain",
    },
  },
}
`;
